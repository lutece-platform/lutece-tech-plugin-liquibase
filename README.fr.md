![](https://dev.lutece.paris.fr/jenkins/buildStatus/icon?job=tech-plugin-liquibase-deploy)
[![Alerte](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=alert_status)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)
[![Line of code](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=ncloc)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)
[![Coverage](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=coverage)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)

# Introduction

This plugin allows for automatic execution of SQL scripts at application startup. Several modes are supported :
 
* Creation : if the database is empty, all create and init scripts will be run.
* Migration : if this plugin was not in use in the previous version, the (previously non empty) database will be configured to use the plugin.
* Update : newly detected scripts will be run.


# Configuration

Par défaut, le plugin ne fait rien. Toutes les configurations sont définies dans le fichier `liquibase-plugin.properties` .

## Propriétés générales

| Propriété| Description| Valeur par défaut|
|-----------------|-----------------|-----------------|
|  `liquibase.enabled.at.startup` | Activer l'exécution du plugin au démarrage de l'application| false|
|  `liquibase.first.run.request` | Requête SQL pour vérifier s'il s'agit de la première exécution (vérifie la table DATABASECHANGELOG)| select count(*) FROM information_schema.tables where table_name='DATABASECHANGELOG';|
|  `liquibase.empty.db.request` | Requête SQL pour vérifier si la base de données est vide| SELECT count(*) FROM information_schema.tables where table_schema=database();|

## Contrôle de version

| Propriété| Description| Valeur par défaut|
|-----------------|-----------------|-----------------|
|  `liquibase.accept.unstable.versions` | Autoriser l'exécution de liquibase sur les fichiers de mise à jour des versions instables (alpha, beta, rc) à chaque démarrage| false|
|  `liquibase.accept.snapshot.versions` | Autoriser l'exécution de liquibase sur les fichiers de mise à jour des versions snapshot à chaque démarrage| false|

## Mode de simulation (Dry Run)

| Propriété| Description| Valeur par défaut|
|-----------------|-----------------|-----------------|
|  `liquibase.dryrun` | Activer le mode de simulation pour générer un script SQL au lieu d'appliquer les modifications à la base de données| false|
|  `liquibase.dryrun.output.file` | Chemin du fichier de sortie pour le script SQL en mode simulation| WEB-INF/plugins/liquibase/liquibase-dryrun.sql|

## Analytique et journalisation

| Propriété| Description| Valeur par défaut|
|-----------------|-----------------|-----------------|
|  `liquibase.analytics.enabled` | Activer l'envoi d'analytiques à Liquibase| false|
|  `liquibase.sql.logLevel` | Définir le niveau de journalisation pour la sortie SQL (OFF, SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST, ALL, DEBUG)| DEBUG|


[Maven documentation and reports](https://dev.lutece.paris.fr/plugins/plugin-liquibase/)



 *generated by [xdoc2md](https://github.com/lutece-platform/tools-maven-xdoc2md-plugin) - do not edit directly.*