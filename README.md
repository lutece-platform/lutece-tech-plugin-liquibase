![](https://dev.lutece.paris.fr/jenkins/buildStatus/icon?job=tech-plugin-liquibase-deploy)
[![Alerte](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=alert_status)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)
[![Line of code](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=ncloc)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)
[![Coverage](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Aplugin-liquibase&metric=coverage)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Aplugin-liquibase)

# Introduction

This plugin allows for automatic execution of SQL scripts at application startup. Several modes are supported :
 
* Creation : if the database is empty, all create and init scripts will be run.
* Migration : if this plugin was not in use in the previous version, the (previously non empty) database will be configured to use the plugin.
* Update : newly detected scripts will be run.


# Configuration

By default the plugin does nothing. All configurations are defined in the `liquibase-plugin.properties` file.

## General Properties

| Property| Description| Default Value|
|-----------------|-----------------|-----------------|
|  `liquibase.enabled.at.startup` | Enable the plugin execution at application startup| false|
|  `liquibase.first.run.request` | SQL query to check if this is the first run (checks for DATABASECHANGELOG table)| select count(*) FROM information_schema.tables where table_name='DATABASECHANGELOG';|
|  `liquibase.empty.db.request` | SQL query to check if the database is empty| SELECT count(*) FROM information_schema.tables where table_schema=database();|

## Version Control

| Property| Description| Default Value|
|-----------------|-----------------|-----------------|
|  `liquibase.accept.unstable.versions` | Allow running liquibase on update files of unstable versions (alpha, beta, rc) at every startup| false|
|  `liquibase.accept.snapshot.versions` | Allow running liquibase on update files of snapshot versions at every startup| false|

## Dry Run Mode

| Property| Description| Default Value|
|-----------------|-----------------|-----------------|
|  `liquibase.dryrun` | Enable dry run mode to output SQL script instead of applying changes to the database| false|
|  `liquibase.dryrun.output.file` | Path to the output file for dry run SQL script| WEB-INF/plugins/liquibase/liquibase-dryrun.sql|

## Analytics and Logging

| Property| Description| Default Value|
|-----------------|-----------------|-----------------|
|  `liquibase.analytics.enabled` | Enable sending analytics to Liquibase| false|
|  `liquibase.sql.logLevel` | Set log level for SQL output (OFF, SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST, ALL, DEBUG)| DEBUG|


[Maven documentation and reports](https://dev.lutece.paris.fr/plugins/plugin-liquibase/)



 *generated by [xdoc2md](https://github.com/lutece-platform/tools-maven-xdoc2md-plugin) - do not edit directly.*